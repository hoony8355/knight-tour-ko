<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>기사의 여행 퍼즐 게임 - 데블스플랜 시즌2 체험</title>
  <meta name="description" content="넷플릭스 데블스플랜 시즌2에 등장한 체스 퍼즐, 기사의 여행을 직접 체험해보세요. 나이트로 모든 칸을 한 번씩만 방문하세요!" />
  <link rel="canonical" href="https://hoony8355.github.io/knight-tour-ko/" />
  <meta property="og:title" content="기사의 여행 퍼즐 게임 - 데블스플랜 시즌2 퍼즐" />
  <meta property="og:description" content="넷플릭스 데블스플랜 시즌2에서 화제가 된 기사의 여행 퍼즐을 지금 직접 풀어보세요!" />
  <meta property="og:url" content="https://hoony8355.github.io/knight-tour-ko/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/8/8c/Chess_knight.jpg" />
  <meta property="og:image:alt" content="기사의 여행 체스 퍼즐 이미지" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="기사의 여행 퍼즐 게임 - 데블스플랜 시즌2 체험" />
  <meta name="twitter:description" content="기사의 여행을 나이트로 체험해보고, 데블스플랜 시즌2의 주인공처럼 도전해보세요!" />
  <meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/8/8c/Chess_knight.jpg" />
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "기사의 여행 퍼즐 게임",
      "url": "https://hoony8355.github.io/knight-tour-ko/",
      "inLanguage": "ko",
      "description": "넷플릭스 데블스플랜 시즌2에 등장한 체스 퍼즐 '기사의 여행'을 웹에서 체험해보세요.",
      "keywords": ["기사의 여행", "체스 퍼즐", "나이트 퍼즐", "데블스플랜 시즌2", "knight tour"],
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {"@type": "ListItem", "position": 1, "name": "홈", "item": "https://hoony8355.github.io/"},
          {"@type": "ListItem", "position": 2, "name": "기사의 여행 퍼즐", "item": "https://hoony8355.github.io/knight-tour-ko/"}
        ]
      }
    }
  </script>
  <style>
    body { font-family: sans-serif; background: #fff; color: #333; text-align: center; padding: 1em; }
    h1 { font-size: 1.8em; margin-bottom: 0.5em; }
    h2 { font-size: 1.4em; margin-top: 2em; }
    table { margin: auto; border-collapse: collapse; }
    td {
      width: 45px; height: 45px; text-align: center; vertical-align: middle; font-weight: bold;
      opacity: 0; animation: fadeIn 0.3s ease-in forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    .light { background: #f0d9b5; }
    .dark { background: #b58863; color: white; }
    .current { outline: 3px solid orange; }
    .hint { box-shadow: inset 0 0 0 3px limegreen; }
    #status { margin-top: 1em; font-weight: bold; }
    #timer { margin-top: 0.5em; font-size: 1em; color: #666; }
    #resetBtn, #sizeSelect { margin-top: 1em; padding: 0.5em 1em; font: inherit; cursor: pointer; }
    #utterances-container { max-width: 700px; margin: 3em auto; text-align: left; }
    .sns-share { margin: 2em auto; font-size: 1em; }
    .sns-share a { margin: 0 0.5em; text-decoration: none; font-weight: bold; }
    #ranking { max-width: 500px; margin: 2em auto; text-align: left; border-top: 1px solid #ccc; padding-top: 1em; }
    #ranking h3 { margin-bottom: 0.5em; }
    #ranking ol { padding-left: 1em; }
  </style>
</head>
<body>
  <h1>기사의 여행 퍼즐 🧩</h1>
  <p>넷플릭스 <strong>데블스플랜 시즌2</strong>에 등장한 퍼즐, <strong>기사의 여행</strong>을 체험해보세요!<br>체스판에서 나이트가 모든 칸을 단 한 번씩만 방문하면 성공입니다.</p>

  <div id="timer">⏱️ 소요 시간: <span id="timeElapsed">0초</span></div>

  <label for="sizeSelect">보드 크기 선택: </label>
  <select id="sizeSelect">
    <option value="5">5x5</option>
    <option value="6">6x6</option>
    <option value="7">7x7</option>
    <option value="8" selected>8x8</option>
  </select>
  <div id="status">시작할 칸을 클릭하세요.</div>
  <table id="board"></table>
  <button id="resetBtn">🔄 다시 시작</button>

  <div class="sns-share">
    <p><strong>퍼즐 재밌게 즐기셨나요? 공유해보세요!</strong></p>
    <a href="https://www.facebook.com/sharer/sharer.php?u=https://hoony8355.github.io/knight-tour-ko/" target="_blank">📘 Facebook</a>
    <a href="https://twitter.com/intent/tweet?text=기사의 여행 퍼즐 도전!&url=https://hoony8355.github.io/knight-tour-ko/" target="_blank">🐦 Twitter</a>
    <a href="https://share.kakao.com/?url=https://hoony8355.github.io/knight-tour-ko/" target="_blank">🟡 Kakao</a>
  </div>

  <div id="ranking">
    <h3>🏆 베스트 기록</h3>
    <ol id="rankingList"></ol>
  </div>

  <div id="utterances-container">
    <h2>💬 공개 댓글</h2>
    <script src="https://utteranc.es/client.js"
            repo="hoony8355/knight-tour-comments"
            issue-term="pathname"
            label="comment"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
  </div>

  <script>
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('status');
    const resetBtn = document.getElementById('resetBtn');
    const sizeSelect = document.getElementById('sizeSelect');
    const timerEl = document.getElementById('timeElapsed');
    const rankingList = document.getElementById('rankingList');
    let size = parseInt(sizeSelect.value);
    let board = [], current = null, moveCount = 0;
    let startTime = null, timerInterval = null;

    const knightMoves = [
      [2, 1], [1, 2], [-1, 2], [-2, 1],
      [-2, -1], [-1, -2], [1, -2], [2, -1]
    ];

    function clearHints() {
      document.querySelectorAll('.hint').forEach(el => el.classList.remove('hint'));
    }

    function showHints(x, y) {
      clearHints();
      knightMoves.forEach(([dx, dy]) => {
        const nx = x + dx, ny = y + dy;
        if (nx >= 0 && nx < size && ny >= 0 && ny < size && !board[ny][nx].visited) {
          board[ny][nx].el.classList.add('hint');
        }
      });
    }

    function updateTimer() {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      timerEl.textContent = `${elapsed}초`;
    }

    function startTimer() {
      startTime = Date.now();
      clearInterval(timerInterval);
      timerInterval = setInterval(updateTimer, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
    }

    function saveRanking(seconds) {
      const scores = JSON.parse(localStorage.getItem('knightRanking') || '[]');
      scores.push(seconds);
      scores.sort((a, b) => a - b);
      localStorage.setItem('knightRanking', JSON.stringify(scores.slice(0, 5)));
      renderRanking();
    }

    function renderRanking() {
      const scores = JSON.parse(localStorage.getItem('knightRanking') || '[]');
      rankingList.innerHTML = '';
      scores.forEach((s, i) => {
        const li = document.createElement('li');
        li.textContent = `${i + 1}. ${s}초`;
        rankingList.appendChild(li);
      });
    }

    function createBoard() {
      size = parseInt(sizeSelect.value);
      boardEl.innerHTML = '';
      board = [];
      for (let y = 0; y < size; y++) {
        const row = [];
        const tr = document.createElement('tr');
        for (let x = 0; x < size; x++) {
          const td = document.createElement('td');
          td.dataset.x = x;
          td.dataset.y = y;
          td.className = (x + y) % 2 === 0 ? 'light' : 'dark';
          td.addEventListener('click', onClick);
          tr.appendChild(td);
          row.push({ el: td, visited: false });
        }
        board.push(row);
        boardEl.appendChild(tr);
      }
      moveCount = 0;
      current = null;
      clearHints();
      statusEl.textContent = '시작할 칸을 클릭하세요.';
      timerEl.textContent = '0초';
      stopTimer();
    }

    function onClick(e) {
      const x = +e.target.dataset.x;
      const y = +e.target.dataset.y;
      const square = board[y][x];
      if (square.visited) return;

      if (!current) startTimer();

      if (current) {
        const dx = Math.abs(x - current.x);
        const dy = Math.abs(y - current.y);
        if (!((dx === 1 && dy === 2) || (dx === 2 && dy === 1))) {
          statusEl.textContent = '❌ 나이트는 L자 형태로만 이동할 수 있어요!';
          return;
        }
      }

      square.el.textContent = ++moveCount;
      square.visited = true;
      if (current) board[current.y][current.x].el.classList.remove('current');
      square.el.classList.add('current');
      current = { x, y };
      clearHints();
      showHints(x, y);

      if (moveCount === size * size) {
        stopTimer();
        const timeUsed = Math.floor((Date.now() - startTime) / 1000);
        statusEl.textContent = `🎉 축하합니다! ${timeUsed}초만에 완주했어요!`;
        saveRanking(timeUsed);
      } else {
        statusEl.textContent = `현재 이동 수: ${moveCount} / ${size * size}`;
      }
    }

    resetBtn.addEventListener('click', createBoard);
    sizeSelect.addEventListener('change', createBoard);
    createBoard();
    renderRanking();
  </script>
</body>
</html>
